name: minify js File
on: 
  push:
    branches:
      - main

jobs:

 minifyJOB:
    runs-on: ubuntu-latest
    steps:
      # Checks-out your repository
      - name: check out code
        uses: actions/checkout@v2
        
      - name: Install Node.js
        uses: actions/setup-node@v2
        with:
            node-version: '14'
      - name: Install terser
        run: npm install terser
      - name: Minify JavaScript Files
        run: |          
          folderPath="./lib" 
          for file in $folderPath/*.js
          do
          if [ $(basename "$file") != "index1.js" ] && [ $(basename "$file") != "index2.js" ]
          then         
          minifiedFile=$(basename "$file" .js)-min.js
          npx terser --compress --mangle --output "$minifiedFile" -- "$file"
          echo "Minified and saved as $minifiedFile"
          echo "$(basename "$file")"
          cat "$file"
          cat "$minifiedFile"
          fi
          done
 echo_minified_file:
   needs: minifyJOB
   runs-on: ubuntu-latest
   steps:
     - name: list
       run: |
         folderPath="./lib"  # Set the path to your JavaScript files folder
         minifiedFiles=("$folderPath"/*-min.js)
         if [ -z "$minifiedFiles" ]
         then
         echo "No minified files found in $folderPath"
         else
         echo "Minified files in $folderPath:"
         for file in $minifiedFiles
         do
           echo "$(basename "$file")"
         done
         fi
         
     
